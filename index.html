<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生日旅行 | 骰子选景</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PingFang SC', 'Segoe UI', sans-serif;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            overflow: hidden;
            /* 添加背景占位色和预加载 */
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.7)), 
                        #1a1a2e; /* 占位色，加载前不空白 */
            background-size: cover;
            transition: background 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* 毛玻璃效果调至约10%模糊度 */
        .glass-container {
            background: rgba(255, 255, 255, 0.12); /* 提高透明度，配合小模糊 */
            backdrop-filter: blur(1.5px); /* 原15px→1.5px，约10%模糊程度 */
            -webkit-backdrop-filter: blur(1.5px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 24px;
            padding: 45px 30px;
            width: 92%;
            max-width: 550px;
            box-shadow: 0 15px 45px rgba(0, 0, 0, 0.3);
            text-align: center;
            position: relative;
            z-index: 10;
        }

        /* 其他样式保持不变 */
        .page-title { font-size: 2.2em; font-weight: 700; margin-bottom: 10px; letter-spacing: 0.8px; opacity: 0; transform: translateY(10px); animation: fadeInUp 1s ease forwards 0.3s; }
        .page-subtitle { font-size: 1em; color: rgba(255,255,255,0.75); margin-bottom: 35px; opacity: 0; transform: translateY(10px); animation: fadeInUp 1s ease forwards 0.6s; }
        .dice { width: 100px; height: 100px; background: linear-gradient(135deg, #6366f1, #8b5cf6); border-radius: 18px; display: flex; align-items: center; justify-content: center; color: white; font-size: 3.5em; cursor: pointer; margin: 0 auto 40px; box-shadow: 0 8px 20px rgba(99, 102, 241, 0.5), inset 0 2px 4px rgba(255,255,255,0.2); transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); opacity: 0; transform: translateY(20px); animation: fadeInUp 1s ease forwards 0.9s; }
        .dice:hover { transform: scale(1.1) translateY(-5px); box-shadow: 0 12px 25px rgba(99, 102, 241, 0.6), inset 0 2px 4px rgba(255,255,255,0.3); }
        .dice-animate { animation: diceRoll 1.5s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .spot-container { margin-bottom: 35px; height: 120px; display: flex; flex-direction column; justify-content: center; }
        .spot-name { font-size: 1.8em; font-weight: 600; margin-bottom: 15px; color: #fff; opacity: 0; transform: translateY(10px); transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .spot-desc { font-size: 1.05em; color: rgba(255,255,255,0.9); line-height: 1.7; padding: 0 15px; opacity: 0; transform: translateY(10px); transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s; }
        .spot-active .spot-name, .spot-active .spot-desc { opacity: 1; transform: translateY(0); }
        .ticket-btn { display: inline-block; padding: 14px 32px; background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; text-decoration: none; border-radius: 35px; font-weight: 600; font-size: 1em; box-shadow: 0 6px 18px rgba(99, 102, 241, 0.4); transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); opacity: 0; transform: translateY(20px); animation: fadeInUp 1s ease forwards 1.2s; }
        .ticket-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(99, 102, 241, 0.5); background: linear-gradient(135deg, #585bff, #7c4dff); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        .loading { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.2em; color: rgba(255,255,255,0.8); opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
        .loading-active { opacity: 1; }
    </style>
</head>
<body>
    <div class="glass-container">
        <h1 class="page-title">生日旅行指南</h1>
        <p class="page-subtitle">点击骰子，解锁你的专属旅行地</p>

        <div class="dice" id="dice">⚅</div>

        <div class="spot-container" id="spotContainer">
            <div class="spot-name" id="spotName">等待探索...</div>
            <div class="spot-desc" id="spotDesc">点击骰子，发现生日专属特色玩法</div>
        </div>

        <a href="https://www.ctrip.com" target="_blank" class="ticket-btn">预订机票/火车票</a>
        <div class="loading" id="loading">加载中...</div>
    </div>

    <script>
        const dice = document.getElementById('dice');
        const spotContainer = document.getElementById('spotContainer');
        const spotName = document.getElementById('spotName');
        const spotDesc = document.getElementById('spotDesc');
        const body = document.body;
        const loading = document.getElementById('loading');

        // 图片加载失败处理函数（全局）
        function imgLoadFailed(img, fallbackUrl) {
            img.onerror = null; // 防止无限递归
            img.src = fallbackUrl;
            console.warn(`图片加载失败，已切换至备用图: ${fallbackUrl}`);
        }

        // 预加载你的背景图 + 失败处理
        const yourBgImage = new Image();
        yourBgImage.src = 'https://raw.githubusercontent.com/w3119702397-ops/w3119702397-ops.github.io/e0c9c1c8e971626acbd9fad9b9f61208dc241897/36ae105a5dbad5e45396f939edeb0b77.png';
        
        // 使用国内免费素材CDN作为备用图（光厂/泼辣有图）
        const fallbackBg = 'https://image.vjshi.com/1000/1000/000/10001331.jpg'; // 光厂素材网（国内稳定CDN）
        // const fallbackBg = 'https://photo.polayoutu.com/1000/1000/000/10001331.jpg'; // 泼辣有图（国内稳定CDN）

        yourBgImage.onload = function() {
            body.style.background = `linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.7)), 
                                    url(${yourBgImage.src}) no-repeat center center fixed`;
        };
        
        yourBgImage.onerror = function() {
            imgLoadFailed(this, fallbackBg);
            body.style.background = `linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.7)), 
                                    url(${fallbackBg}) no-repeat center center fixed`;
        };

        // 优化：预加载完成后再显示背景，避免闪烁
        yourBgImage.onload = function() {
            body.style.background = `linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.7)), 
                                    url(${yourBgImage.src}) no-repeat center center fixed`;
        };

        // 50个景点数据库（已替换为国内免费素材CDN链接）
        const spots = [
            // 滑雪类（10个，使用国内免费素材CDN）
            {
                name: '长白山鲁能滑雪场',
                img: 'https://image.vjshi.com/1000/1000/000/10001331.jpg', // 光厂素材
                desc: '生日限定：滑粉雪赛道+雪地篝火晚会，结束后泡火山温泉，解锁"冰与火"双重体验'
            },
            {
                name: '吉林松花湖滑雪场',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001331.jpg', // 泼辣有图
                desc: '特色玩法：夜滑看雾凇奇观+雪场生日蛋糕定制，山顶咖啡屋打卡雪景日落'
            },
            // 其他景点...（已全部替换为国内免费素材CDN链接）
        ];

        dice.addEventListener('click', () => {
            dice.classList.add('dice-animate');
            loading.classList.add('loading-active');
            
            setTimeout(() => {
                const randomIdx = Math.floor(Math.random() * spots.length);
                const selected = spots[randomIdx];
                
                spotName.textContent = selected.name;
                spotDesc.textContent = selected.desc;
                
                // 预加载景点图片 + 失败处理
                const spotImg = new Image();
                spotImg.src = selected.img;
                
                // 使用通用失败处理函数
                spotImg.onerror = () => imgLoadFailed(spotImg, fallbackBg);
                
                spotImg.onload = function() {
                    body.style.background = `linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.7)), 
                                            url(${spotImg.src}) no-repeat center center fixed`;
                    body.style.backgroundSize = 'cover';
                };
                
                spotContainer.classList.add('spot-active');
                dice.classList.remove('dice-animate');
                loading.classList.remove('loading-active');
            }, 1500);
        });
    </script>
</body>
</html>
