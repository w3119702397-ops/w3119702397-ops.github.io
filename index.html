<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生日旅行指南 | 吉祥求签</title>
    <!-- 引入花体字 -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Noto+Sans+SC:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- 引入高德地图API（替换为你的密钥） -->
    <script src="https://webapi.amap.com/maps?v=2.0&key=你的高德地图API密钥"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            color: #fff;
            overflow-x: hidden;
            background: linear-gradient(135deg, #2c3e50, #1a2530);
            background-size: cover;
            transition: background 1.2s ease;
            position: relative;
            padding: 20px 0;
        }

        /* 金属质感玻璃容器 */
        .glass-container {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(1.5px);
            -webkit-backdrop-filter: blur(1.5px);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 24px;
            padding: 30px 25px;
            width: 85%;
            max-width: 550px;
            text-align: center;
            z-index: 10;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 25px;
        }

        /* 花体标题 */
        .page-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3em;
            font-weight: 700;
            margin-bottom: 8px;
            color: #f8f9fa;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .page-subtitle {
            font-size: 0.95em;
            color: rgba(255,255,255,0.7);
            margin-bottom: 30px;
            letter-spacing: 1px;
        }

        /* 搜索区域 */
        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            width: 100%;
        }

        #searchInput {
            flex: 1;
            padding: 12px 15px;
            border-radius: 30px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.05);
            color: #fff;
            font-size: 0.95em;
            outline: none;
            transition: all 0.3s ease;
        }

        #searchInput::placeholder {
            color: rgba(255,255,255,0.5);
        }

        #searchInput:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }

        #searchButton {
            padding: 12px 20px;
            border-radius: 30px;
            border: none;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: #fff;
            font-size: 0.95em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #searchButton:hover {
            background: linear-gradient(135deg, #585bff, #7c4dff);
            transform: translateY(-2px);
        }

        /* 金属渐变骰子 */
        .dice {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #c0c0c0, #888888);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5em;
            cursor: pointer;
            margin: 0 auto 30px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4), inset 0 -4px 8px rgba(0, 0, 0, 0.3), inset 0 4px 8px rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            pointer-events: auto;
            position: relative;
            overflow: hidden;
        }

        /* 骰子点数 */
        .dice-dot {
            position: absolute;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .dot-1 { top: 40px; left: 40px; }
        .dot-2-1 { top: 25px; left: 25px; }
        .dot-2-2 { top: 55px; left: 55px; }
        .dot-3-1 { top: 25px; left: 25px; }
        .dot-3-2 { top: 40px; left: 40px; }
        .dot-3-3 { top: 55px; left: 55px; }
        .dot-4-1 { top: 25px; left: 25px; }
        .dot-4-2 { top: 25px; left: 55px; }
        .dot-4-3 { top: 55px; left: 25px; }
        .dot-4-4 { top: 55px; left: 55px; }
        .dot-5-1 { top: 25px; left: 25px; }
        .dot-5-2 { top: 25px; left: 55px; }
        .dot-5-3 { top: 40px; left: 40px; }
        .dot-5-4 { top: 55px; left: 25px; }
        .dot-5-5 { top: 55px; left: 55px; }
        .dot-6-1 { top: 25px; left: 25px; }
        .dot-6-2 { top: 25px; left: 55px; }
        .dot-6-3 { top: 40px; left: 25px; }
        .dot-6-4 { top: 40px; left: 55px; }
        .dot-6-5 { top: 55px; left: 25px; }
        .dot-6-6 { top: 55px; left: 55px; }

        .dice:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5), inset 0 -4px 8px rgba(0, 0, 0, 0.3), inset 0 4px 8px rgba(255, 255, 255, 0.2);
        }

        .dice-shake {
            animation: diceShake 1.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
            pointer-events: none;
        }

        @keyframes diceShake {
            0% { transform: translate(0, 0) rotate(0deg); }
            10% { transform: translate(-5px, -5px) rotate(-10deg); }
            20% { transform: translate(5px, 5px) rotate(10deg); }
            30% { transform: translate(-5px, 5px) rotate(-10deg); }
            40% { transform: translate(5px, -5px) rotate(10deg); }
            50% { transform: translate(-3px, -3px) rotate(-5deg); }
            60% { transform: translate(3px, 3px) rotate(5deg); }
            70% { transform: translate(-3px, 3px) rotate(-5deg); }
            80% { transform: translate(3px, -3px) rotate(5deg); }
            90% { transform: translate(-2px, -2px) rotate(-3deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        /* 景点信息区域 */
        .spot-area {
            margin: 15px 0;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1s ease 0.5s;
        }

        .spot-area.show {
            opacity: 1;
            transform: translateY(0);
        }

        .spot-name {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 8px;
            color: #f8f9fa;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .spot-location {
            font-family: 'Noto Sans SC', sans-serif;
            font-size: 1.2em;
            color: rgba(255,255,255,0.9);
            margin: 10px 0;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .spot-desc {
            font-family: 'Dancing Script', cursive;
            font-size: 1.4em;
            color: rgba(255,255,255,0.85);
            line-height: 1.8;
            padding: 0 10px;
            min-height: 80px;
        }

        /* 搜索结果列表样式 */
        .spot-desc ul {
            list-style: none;
            padding: 0;
            margin: 10px 0;
        }

        .spot-desc li {
            padding: 10px 5px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Sans SC', sans-serif;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .spot-desc li:hover {
            color: #8b5cf6;
            background: rgba(255,255,255,0.05);
        }

        /* 预订按钮 */
        .ticket-btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            text-decoration: none;
            border-radius: 30px;
            font-weight: 500;
            font-size: 1em;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
            transition: all 0.3s ease;
            margin-top: 15px;
            letter-spacing: 1px;
        }

        .ticket-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
            background: linear-gradient(135deg, #585bff, #7c4dff);
        }

        /* 地图容器 */
        .map-container {
            width: 85%;
            max-width: 550px;
            height: 280px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 10;
            margin-bottom: 20px;
        }

        /* 求签覆盖层 */
        .lottery-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .lottery-overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        .lottery-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            padding: 60px 40px;
            width: 80%;
            max-width: 450px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transform: translateY(30px);
            transition: transform 0.5s ease;
        }

        .lottery-overlay.show .lottery-card {
            transform: translateY(0);
        }

        .lottery-text {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5em;
            color: #2c3e50;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .lottery-tip {
            font-size: 1em;
            color: #666;
            letter-spacing: 1px;
        }

        /* 页尾版权 */
        .footer {
            position: absolute;
            bottom: 15px;
            font-size: 0.8em;
            color: rgba(255,255,255,0.5);
            letter-spacing: 1px;
            z-index: 5;
        }

        /* 适配小屏幕 */
        @media (max-width: 480px) {
            .page-title {
                font-size: 2.5em;
            }
            .dice {
                width: 90px;
                height: 90px;
                font-size: 2.2em;
            }
            .map-container {
                height: 220px;
            }
            .lottery-text {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="glass-container">
        <h1 class="page-title">生日旅行·吉祥求签</h1>
        <p class="page-subtitle">摇一摇骰子，解锁专属旅行与好运</p>

        <!-- 搜索区域 -->
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="搜索旅行地点（如：三亚、滑雪）...">
            <button id="searchButton">搜索</button>
        </div>

        <!-- 金属渐变骰子 -->
        <div class="dice" id="dice">
            <div class="dice-dot dot-1"></div>
            <div class="dice-dot dot-2-1"></div>
            <div class="dice-dot dot-2-2"></div>
            <div class="dice-dot dot-3-1"></div>
            <div class="dice-dot dot-3-2"></div>
            <div class="dice-dot dot-3-3"></div>
            <div class="dice-dot dot-4-1"></div>
            <div class="dice-dot dot-4-2"></div>
            <div class="dice-dot dot-4-3"></div>
            <div class="dice-dot dot-4-4"></div>
            <div class="dice-dot dot-5-1"></div>
            <div class="dice-dot dot-5-2"></div>
            <div class="dice-dot dot-5-3"></div>
            <div class="dice-dot dot-5-4"></div>
            <div class="dice-dot dot-5-5"></div>
            <div class="dice-dot dot-6-1"></div>
            <div class="dice-dot dot-6-2"></div>
            <div class="dice-dot dot-6-3"></div>
            <div class="dice-dot dot-6-4"></div>
            <div class="dice-dot dot-6-5"></div>
            <div class="dice-dot dot-6-6"></div>
        </div>

        <!-- 景点信息区域 -->
        <div class="spot-area" id="spotArea">
            <div class="spot-name" id="spotName">等待探索...</div>
            <div class="spot-location" id="spotLocation"></div>
            <div class="spot-desc" id="spotDesc">摇一摇骰子，解锁专属旅行地与吉祥签语</div>
        </div>

        <a href="https://www.ctrip.com" target="_blank" class="ticket-btn">预订出行好运</a>
    </div>

    <!-- 地图容器 -->
    <div class="map-container" id="map"></div>

    <!-- 求签覆盖层 -->
    <div class="lottery-overlay" id="lotteryOverlay">
        <div class="lottery-card">
            <div class="lottery-text" id="lotteryText"></div>
            <div class="lottery-tip">点击任意位置关闭，查看旅行推荐</div>
        </div>
    </div>

    <div class="footer">© 2024 生日旅行指南 | 好运常伴</div>

    <script>
        // DOM元素
        const dice = document.getElementById('dice');
        const spotArea = document.getElementById('spotArea');
        const spotName = document.getElementById('spotName');
        const spotLocation = document.getElementById('spotLocation');
        const spotDesc = document.getElementById('spotDesc');
        const lotteryOverlay = document.getElementById('lotteryOverlay');
        const lotteryText = document.getElementById('lotteryText');
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const body = document.body;

        // 国内备用图CDN
        const fallbackBg = 'https://image.vjshi.com/1000/1000/000/10001331.jpg';

        // 1. 50句吉祥签语
        const lotteryTexts = [
            "愿你旅途顺遂，所见皆美景，所遇皆善人",
            "生日出行，好运加持，平安喜乐，万事胜意",
            "山川湖海皆可往，岁岁年年皆安康",
            "旅途有惊喜，生日有好运，未来皆可期",
            "踏遍山河，人间值得，生日快乐，前程似锦",
            "愿你遍历山河，觉得人间温暖，旅途无忧",
            "生日旅行，福气相伴，财运亨通，喜事连连",
            "一路繁花相送，万事顺心如意，平安抵达",
            "愿你眼里有光，心中有爱，脚下有路，旅途精彩",
            "出行遇贵人，生日添福气，生活多顺遂",
            "山河辽阔，人间烟火，生日旅行，快乐翻倍",
            "愿你旅途平安，收获满满，生日快乐，幸福常伴",
            "摇得此签，好运缠身，旅行顺利，万事大吉",
            "生日出行，好运相随，健康相伴，快乐无忧",
            "愿你所到之处，皆为热土，所遇之人，皆为良善",
            "旅途漫漫，好运相伴，生日喜乐，岁岁平安",
            "愿你遍历山河，仍觉人间值得，旅行愉快",
            "生日旅行，福气满满，财运滚滚，喜事不断",
            "一路顺风，平安喜乐，生日快乐，心想事成",
            "愿你眼里有星辰，心中有山海，旅途有惊喜",
            "出行顺利，生日安康，未来可期，好运常伴",
            "摇此吉签，旅途无忧，生日快乐，幸福美满",
            "愿你踏遍山河，感受人间美好，旅行顺遂",
            "生日出行，好运加持，健康长寿，万事胜意",
            "一路繁花，一路惊喜，生日喜乐，生活美满",
            "愿你所行皆坦途，所遇皆温柔，旅途愉快",
            "生日旅行，福气相伴，财运亨通，平安喜乐",
            "摇得好运签，旅途无阻碍，生日添福寿",
            "愿你遍历人间，仍保持热爱，旅行精彩",
            "出行平安，生日快乐，万事顺心，好运连连",
            "山河无恙，人间皆安，生日旅行，快乐无限",
            "愿你旅途有诗，心中有梦，脚下有路，未来可期",
            "生日出行，好运相随，健康相伴，喜事临门",
            "摇此吉签，福气满满，旅行顺利，生活幸福",
            "愿你所到之处，春暖花开，所遇之人，温暖善良",
            "旅途顺利，生日安康，财运亨通，万事大吉",
            "生日旅行，快乐翻倍，好运缠身，平安喜乐",
            "愿你眼里有光，心中有爱，旅途有景，生活有甜",
            "出行遇好运，生日添福气，未来皆美好",
            "摇得此签，旅途顺遂，生日快乐，幸福常伴",
            "愿你踏遍山河，觉得人间值得，平安喜乐",
            "生日出行，好运加持，健康长寿，万事胜意",
            "一路顺风，平安抵达，生日喜乐，生活美满",
            "愿你所行皆坦途，所遇皆良善，旅途无忧",
            "生日旅行，福气相伴，财运滚滚，喜事不断",
            "摇此吉签，好运常伴，旅行精彩，生日快乐",
            "愿你遍历人间烟火，仍觉岁月温柔，旅途愉快",
            "出行平安，生日安康，万事顺心，好运连连",
            "生日旅行，快乐无限，福气满满，未来可期",
            "愿你山河入梦，旅途无忧，生日喜乐，岁岁平安"
        ];

        // 2. 完整50个景点数据库
        const spots = [
            // 滑雪类（10个）
            {
                name: '长白山鲁能滑雪场',
                img: 'https://image.vjshi.com/1000/1000/000/10001331.jpg',
                desc: '【位置：吉林长白山】生日限定：滑粉雪赛道+雪地篝火晚会，结束后泡火山温泉，解锁"冰与火"双重体验'
            },
            {
                name: '吉林松花湖滑雪场',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001331.jpg',
                desc: '【位置：吉林吉林市】特色玩法：夜滑看雾凇奇观+雪场生日蛋糕定制，山顶咖啡屋打卡雪景日落'
            },
            {
                name: '北京南山滑雪场',
                img: 'https://image.vjshi.com/1000/1000/000/10001332.jpg',
                desc: '【位置：北京密云】城市周边首选：初级道安全畅滑+雪地香蕉船互动，赠送生日主题滑雪手套'
            },
            {
                name: '新疆阿勒泰将军山滑雪场',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001332.jpg',
                desc: '【位置：新疆阿勒泰】滑雪发烧友必去：超长雪道+粉雪天堂，生日可预约专属教练1v1指导'
            },
            {
                name: '河北崇礼云顶滑雪场',
                img: 'https://image.vjshi.com/1000/1000/000/10001333.jpg',
                desc: '【位置：河北张家口】冬奥同款赛道：专业雪道+雪地摩天轮，生日当天可享受滑雪装备免费升级'
            },
            {
                name: '四川西岭雪山滑雪场',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001333.jpg',
                desc: '【位置：四川成都】南方滑雪胜地：林海雪原滑降+雪地摩托越野，下山后吃温泉蛋暖身'
            },
            {
                name: '黑龙江亚布力滑雪场',
                img: 'https://image.vjshi.com/1000/1000/000/10001334.jpg',
                desc: '【位置：黑龙江哈尔滨】东北老牌雪场：高山滑雪+狗拉雪橇体验，生日专属"雪乡民宿"暖炕套餐'
            },
            {
                name: '内蒙古阿尔山滑雪场',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001334.jpg',
                desc: '【位置：内蒙古兴安盟】小众宝藏：草原雪景滑降+蒙古包生日晚宴，品尝手把肉+马奶酒'
            },
            {
                name: '云南会泽大海草山滑雪场',
                img: 'https://image.vjshi.com/1000/1000/000/10001335.jpg',
                desc: '【位置：云南曲靖】高原滑雪体验：海拔2800米雪场+彝族风情生日派对，赠送民族刺绣纪念品'
            },
            {
                name: '浙江安吉江南天池滑雪场',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001335.jpg',
                desc: '【位置：浙江湖州】华东地区首选：竹海环绕雪道+温泉酒店住宿，生日可享受滑雪门票买一送一'
            },
            // 人文古迹类（10个）
            {
                name: '北京故宫博物院',
                img: 'https://image.vjshi.com/1000/1000/000/10001336.jpg',
                desc: '【位置：北京东城】生日专属：穿汉服拍古风大片+珍宝馆VIP讲解，角楼夜景打卡送生日相框'
            },
            {
                name: '西安兵马俑博物馆',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001336.jpg',
                desc: '【位置：陕西西安】历史沉浸：专业讲解+兵马俑手办DIY，生日当天可体验"秦俑复刻"摄影套餐'
            },
            {
                name: '丽江古城',
                img: 'https://image.vjshi.com/1000/1000/000/10001337.jpg',
                desc: '【位置：云南丽江】慢生活生日：逛四方街+听纳西古乐，预订古城民宿送生日鲜花饼+篝火晚会入场券'
            },
            {
                name: '平遥古城',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001337.jpg',
                desc: '【位置：山西晋中】晋商文化体验：古城墙骑行+平遥牛肉宴，生日可定制"镖局护送"主题活动'
            },
            {
                name: '苏州园林（拙政园）',
                img: 'https://image.vjshi.com/1000/1000/000/10001338.jpg',
                desc: '【位置：江苏苏州】江南诗意生日：园林游船+苏绣DIY，赠送生日主题团扇，夜游山塘街吃小吃'
            },
            {
                name: '敦煌莫高窟',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001338.jpg',
                desc: '【位置：甘肃敦煌】沙漠文化之旅：壁画临摹体验+鸣沙山星空露营，生日送沙漠日出摄影服务'
            },
            {
                name: '福建土楼（永定）',
                img: 'https://image.vjshi.com/1000/1000/000/10001339.jpg',
                desc: '【位置：福建龙岩】客家文化体验：土楼民宿住宿+客家米酒宴，生日可参与土楼灯笼DIY'
            },
            {
                name: '曲阜三孔',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001339.jpg',
                desc: '【位置：山东济宁】文化研学生日：孔庙祭孔仪式+书法体验，赠送《论语》定制书签'
            },
            {
                name: '洛阳龙门石窟',
                img: 'https://image.vjshi.com/1000/1000/000/10001340.jpg',
                desc: '【位置：河南洛阳】石窟艺术之旅：夜游石窟看灯光秀+洛阳水席，生日送牡丹花茶礼盒'
            },
            {
                name: '大理古城',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001340.jpg',
                desc: '【位置：云南大理】风花雪月生日：环洱海骑行+白族三道茶体验，预订海景客栈送生日蛋糕'
            },
            // 自然景观类（15个）
            {
                name: '杭州西湖',
                img: 'https://image.vjshi.com/1000/1000/000/10001341.jpg',
                desc: '【位置：浙江杭州】诗意生日：泛舟湖上赏荷花+苏堤漫步，雷峰塔夜景打卡，赠送西湖藕粉礼盒'
            },
            {
                name: '张家界国家森林公园',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001341.jpg',
                desc: '【位置：湖南张家界】仙境体验：玻璃栈道挑战+百龙天梯观光，生日可预约山顶观景台私人摄影'
            },
            {
                name: '新疆喀纳斯湖',
                img: 'https://image.vjshi.com/1000/1000/000/10001342.jpg',
                desc: '【位置：新疆阿勒泰】秋日限定：晨雾湖景+禾木村家访，生日送哈萨克族手工刺绣挂饰'
            },
            {
                name: '桂林漓江',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001342.jpg',
                desc: '【位置：广西桂林】山水画卷：竹筏漂流+阳朔西街美食，生日可定制漓江渔火夜景拍摄'
            },
            {
                name: '青海湖',
                img: 'https://image.vjshi.com/1000/1000/000/10001343.jpg',
                desc: '【位置：青海海南】高原圣湖生日：环湖骑行+油菜花田打卡，赠送藏式哈达+酥油茶体验'
            },
            {
                name: '黄山',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001343.jpg',
                desc: '【位置：安徽黄山】云海奇观：黄山日出+迎客松打卡，生日送黄山毛峰茶礼盒，住山顶酒店'
            },
            {
                name: '九寨沟',
                img: 'https://image.vjshi.com/1000/1000/000/10001344.jpg',
                desc: '【位置：四川阿坝】童话世界：海子徒步+藏寨家访，生日可享受景区接驳车优先乘坐权'
            },
            {
                name: '稻城亚丁',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001344.jpg',
                desc: '【位置：四川甘孜】川西秘境：牛奶海徒步+冲古寺祈福，生日送高原防寒围巾+氧气瓶套装'
            },
            {
                name: '张掖丹霞地质公园',
                img: 'https://image.vjshi.com/1000/1000/000/10001345.jpg',
                desc: '【位置：甘肃张掖】色彩盛宴：丹霞日落观赏+地质科普讲解，生日送丹霞主题明信片套装'
            },
            {
                name: '厦门鼓浪屿',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001345.jpg',
                desc: '【位置：福建厦门】文艺生日：钢琴博物馆参观+菽庄花园漫步，预订民宿送海鲜生日餐'
            },
            {
                name: '西双版纳热带雨林',
                img: 'https://image.vjshi.com/1000/1000/000/10001346.jpg',
                desc: '【位置：云南西双版纳】热带风情：野象谷观象+傣族泼水体验，生日送傣装拍照套装'
            },
            {
                name: '壶口瀑布',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001346.jpg',
                desc: '【位置：晋陕交界】黄河奇观：瀑布观景+陕北窑洞体验，生日送黄河主题剪纸纪念品'
            },
            {
                name: '香格里拉普达措',
                img: 'https://image.vjshi.com/1000/1000/000/10001347.jpg',
                desc: '【位置：云南迪庆】高原湿地：属都湖划船+栈道徒步，生日送藏香制作体验课'
            },
            {
                name: '青岛崂山',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001347.jpg',
                desc: '【位置：山东青岛】山海生日：崂山茶田采茶+海鲜大排档聚餐，赠送崂山绿茶礼盒'
            },
            {
                name: '三亚亚龙湾',
                img: 'https://image.vjshi.com/1000/1000/000/10001348.jpg',
                desc: '【位置：海南三亚】海滨度假：沙滩烧烤+浮潜体验，生日送海景酒店蛋糕布置'
            },
            // 城市休闲类（15个）
            {
                name: '上海外滩',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001348.jpg',
                desc: '【位置：上海黄浦】魔都夜景：陆家嘴灯光秀+黄浦江游船，生日送外滩观景台VIP票'
            },
            {
                name: '成都宽窄巷子',
                img: 'https://image.vjshi.com/1000/1000/000/10001349.jpg',
                desc: '【位置：四川成都】川味生日：火锅宴+采耳体验，再去熊猫基地看幼崽，赠送熊猫公仔'
            },
            {
                name: '重庆洪崖洞',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001349.jpg',
                desc: '【位置：重庆渝中】山城夜景：洪崖洞拍照+火锅小面，生日送长江索道往返优先票'
            },
            {
                name: '广州北京路',
                img: 'https://image.vjshi.com/1000/1000/000/10001350.jpg',
                desc: '【位置：广东广州】粤味生日：早茶体验+北京路逛街，生日送广式点心礼盒'
            },
            {
                name: '深圳大鹏半岛',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001350.jpg',
                desc: '【位置：广东深圳】海滨休闲：沙滩露营+赶海体验，生日送海鲜烧烤套装'
            },
            {
                name: '南京夫子庙',
                img: 'https://image.vjshi.com/1000/1000/000/10001351.jpg',
                desc: '【位置：江苏南京】金陵夜色：秦淮河游船+鸭血粉丝汤，生日送夫子庙文创书签'
            },
            {
                name: '武汉黄鹤楼',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001351.jpg',
                desc: '【位置：湖北武汉】江城生日：黄鹤楼登高+热干面早餐，生日送武昌鱼礼盒'
            },
            {
                name: '长沙橘子洲',
                img: 'https://image.vjshi.com/1000/1000/000/10001352.jpg',
                desc: '【位置：湖南长沙】湘味生日：小龙虾宴+茶颜悦色限定款，生日送橘子洲头明信片'
            },
            {
                name: '天津五大道',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001352.jpg',
                desc: '【位置：天津和平】洋楼风情：马车游览+狗不理包子宴，生日送天津麻花礼盒'
            },
            {
                name: '西安大唐不夜城',
                img: 'https://image.vjshi.com/1000/1000/000/10001353.jpg',
                desc: '【位置：陕西西安】唐风华韵：不倒翁表演+肉夹馍套餐，生日送唐装体验券'
            },
            {
                name: '昆明滇池',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001353.jpg',
                desc: '【位置：云南昆明】春城生日：海鸥喂食+过桥米线宴，生日送云南鲜花饼礼盒'
            },
            {
                name: '贵阳甲秀楼',
                img: 'https://image.vjshi.com/1000/1000/000/10001354.jpg',
                desc: '【位置：贵州贵阳】黔味生日：酸汤鱼宴+甲秀楼夜景，生日送贵州茅台冰淇淋'
            },
            {
                name: '南宁中山路',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001354.jpg',
                desc: '【位置：广西南宁】壮乡风味：老友粉+夜市小吃，生日送广西螺蛳粉礼盒'
            },
            {
                name: '银川沙湖',
                img: 'https://image.vjshi.com/1000/1000/000/10001355.jpg',
                desc: '【位置：宁夏银川】沙水共生：沙漠骆驼+湖上游船，生日送宁夏枸杞礼盒'
            },
            {
                name: '兰州黄河铁桥',
                img: 'https://photo.polayoutu.com/1000/1000/000/10001355.jpg',
                desc: '【位置：甘肃兰州】西北风味：牛肉面宴+黄河索道，生日送兰州百合礼盒'
            }
        ];

        // 3. 地图初始化
        let map, updateMap;
        function initMap() {
            try {
                map = new AMap.Map('map', {
                    zoom: 4,
                    center: [104.06, 30.67],
                    resizeEnable: true
                });

                updateMap = function(location) {
                    if (!map) return;
                    map.clearMap();
                    const geocoder = new AMap.Geocoder({ city: '全国' });
                    geocoder.getLocation(location, (status, result) => {
                        if (status === 'complete' && result.geocodes.length > 0) {
                            const lnglat = result.geocodes[0].location;
                            const marker = new AMap.Marker({ position: lnglat });
                            map.add(marker);
                            map.setCenter(lnglat);
                            map.setZoom(12);
                        }
                    });
                };
            } catch (e) {
                console.error('地图初始化失败，请检查API密钥：', e);
                document.querySelector('.map-container').innerHTML = '<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#ccc;font-size:0.9em;">地图加载失败，请检查API密钥是否正确</div>';
            }
        }

        // 页面加载完成后初始化地图
        window.onload = initMap;

        // 4. 显示骰子点数
        function showRandomDots() {
            document.querySelectorAll('.dice-dot').forEach(dot => dot.style.opacity = 0);
            const dotCount = Math.floor(Math.random() * 6) + 1;
            switch(dotCount) {
                case 1: document.querySelector('.dot-1').style.opacity = 1; break;
                case 2: document.querySelector('.dot-2-1').style.opacity = 1; document.querySelector('.dot-2-2').style.opacity = 1; break;
                case 3: document.querySelector('.dot-3-1').style.opacity = 1; document.querySelector('.dot-3-2').style.opacity = 1; document.querySelector('.dot-3-3').style.opacity = 1; break;
                case 4: document.querySelector('.dot-4-1').style.opacity = 1; document.querySelector('.dot-4-2').style.opacity = 1; document.querySelector('.dot-4-3').style.opacity = 1; document.querySelector('.dot-4-4').style.opacity = 1; break;
                case 5: document.querySelector('.dot-5-1').style.opacity = 1; document.querySelector('.dot-5-2').style.opacity = 1; document.querySelector('.dot-5-3').style.opacity = 1; document.querySelector('.dot-5-4').style.opacity = 1; document.querySelector('.dot-5-5').style.opacity = 1; break;
                case 6: document.querySelector('.dot-6-1').style.opacity = 1; document.querySelector('.dot-6-2').style.opacity = 1; document.querySelector('.dot-6-3').style.opacity = 1; document.querySelector('.dot-6-4').style.opacity = 1; document.querySelector('.dot-6-5').style.opacity = 1; document.querySelector('.dot-6-6').style.opacity = 1; break;
            }
        }

        // 5. 解析并显示位置信息
        function showLocation(desc) {
            const locationMatch = desc.match(/【位置：(.*?)】/);
            if (locationMatch) {
                spotLocation.textContent = locationMatch[1];
                return locationMatch[1];
            } else {
                spotLocation.textContent = '';
                return '';
            }
        }

        // 6. 骰子点击交互
        dice.addEventListener('click', () => {
            dice.classList.add('dice-shake');
            spotArea.classList.remove('show');

            setTimeout(() => {
                showRandomDots();
                const randomSpotIdx = Math.floor(Math.random() * spots.length);
                const selectedSpot = spots[randomSpotIdx];
                const randomLotteryIdx = Math.floor(Math.random() * lotteryTexts.length);
                const selectedLottery = lotteryTexts[randomLotteryIdx];

                // 显示签语
                lotteryText.textContent = selectedLottery;
                lotteryOverlay.classList.add('show');

                // 预加载背景图
                const spotBgImg = new Image();
                spotBgImg.src = selectedSpot.img;
                spotBgImg.onload = () => {
                    body.style.background = `linear-gradient(135deg, #2c3e50, #1a2530), url(${spotBgImg.src}) no-repeat center center fixed`;
                    body.style.backgroundBlendMode = 'overlay';
                };
                spotBgImg.onerror = () => {
                    body.style.background = `linear-gradient(135deg, #2c3e50, #1a2530), url(${fallbackBg}) no-repeat center center fixed`;
                    body.style.backgroundBlendMode = 'overlay';
                };

                // 更新景点信息
                spotName.textContent = selectedSpot.name;
                const location = showLocation(selectedSpot.desc);
                spotDesc.textContent = selectedSpot.desc.replace(/【位置：(.*?)】/, '');

                // 更新地图
                if (location && updateMap) updateMap(location);

                dice.classList.remove('dice-shake');
            }, 1500);
        });

        // 7. 关闭签语覆盖层
        lotteryOverlay.addEventListener('click', () => {
            lotteryOverlay.classList.remove('show');
            spotArea.classList.add('show');
        });

        // 8. 搜索功能
        searchButton.addEventListener('click', () => {
            const query = searchInput.value.trim();
            if (!query) return;
            const results = spots.filter(spot => 
                spot.name.includes(query) || spot.desc.includes(query)
            );
            showSearchResults(results);
        });

        // 回车触发搜索
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') searchButton.click();
        });

        // 显示搜索结果
        function showSearchResults(results) {
            spotArea.classList.add('show');
            if (results.length === 0) {
                spotName.textContent = '未找到结果';
                spotLocation.textContent = '';
                spotDesc.textContent = `没有找到包含"${query}"的旅行地点，请换个关键词试试～`;
                return;
            }

            spotName.textContent = `搜索结果（${results.length}个）`;
            spotLocation.textContent = '';
            let resultHtml = '<ul>';
            results.forEach(spot => {
                const locationMatch = spot.desc.match(/【位置：(.*?)】/);
                const location = locationMatch ? locationMatch[1] : '未知位置';
                resultHtml += `<li onclick="selectSpot('${spot.name}')">${spot.name} - ${location}</li>`;
            });
            resultHtml += '</ul>';
            spotDesc.innerHTML = resultHtml;
        }

        // 选择搜索结果中的景点
        window.selectSpot = function(name) {
            const selectedSpot = spots.find(spot => spot.name === name);
            if (!selectedSpot) return;

            spotName.textContent = selectedSpot.name;
            const location = showLocation(selectedSpot.desc);
            spotDesc.textContent = selectedSpot.desc.replace(/【位置：(.*?)】/, '');

            // 预加载背景图
            const spotBgImg = new Image();
            spotBgImg.src = selectedSpot.img;
            spotBgImg.onload = () => {
                body.style.background = `linear-gradient(135deg, #2c3e50, #1a2530), url(${spotBgImg.src}) no-repeat center center fixed`;
                body.style.backgroundBlendMode = 'overlay';
            };

            // 更新地图
            if (location && updateMap) updateMap(location);
        };

        // 初始化显示1点
        setTimeout(() => {
            document.querySelector('.dot-1').style.opacity = 1;
        }, 500);
    </script>
</body>
</html>
